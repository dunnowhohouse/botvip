module.exports.config={name:"log",eventType:["log:unsubscribe","log:subscribe","log:thread-name"],version:"1.0.0",credits:"Mirai Team",description:"Ghi lại thông báo các hoạt đông của bot!",envConfig:{enable:!0}},module.exports.run=async function({api:e,event:a,Users:t,Threads:n}){const o=require("../../utils/log");if(!global.configModule[this.config.name].enable)return;const i=require("moment-timezone").tz("Asia/Ho_Chi_Minh").format("D/MM/YYYY HH:mm:ss"),s=global.data.userName.get(a.author)||await t.getNameUser(a.author);var r="=== Bot Notification ===\n\n🔰Thread ID: "+a.threadID+"\n🤷‍♀️Hành động: {task}\n🍳Tên người dùng: "+s+"\n⚡UserID: "+a.author+"\n\n⏰Time: "+i,d="";switch(a.logMessageType){case"log:subscribe":a.logMessageData.addedParticipants.some((e=>e.userFbId==global.data.botID))&&(d="Người dùng đã thêm bot vào một nhóm mới!");break;case"log:unsubscribe":if(a.logMessageData.leftParticipantFbId==global.data.botID){const e=(await n.getData(a.threadID)).data||{};e.banned=!0;e.reason="Kích bot tự do, không xin phép",e.dateAdded=i,await n.setData(a.threadID,{data:e}),global.data.threadBanned.set(a.threadID,{reason:e.reason,dateAdded:e.dateAdded}),d="Người dùng đã kick bot ra khỏi nhóm!"}}return 0!=d.length?(r=r.replace(/\{task}/g,d),e.sendMessage(r,global.config.ADMINBOT[0],((e,a)=>{if(e)return o(r,"[ Logging Event ]")}))):void 0};